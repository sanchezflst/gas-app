{"ast":null,"code":"import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code) {\n  return typeof code === 'string';\n}\nfunction testDef(code) {\n  return code in defs;\n}\nvar codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS', 'GEOCCS', 'PROJCS', 'LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code) {\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code) {\n  return code[0] === '+';\n}\nfunction parse(code) {\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  } else {\n    return code;\n  }\n}\nexport default parse;","map":{"version":3,"names":["defs","wkt","projStr","match","testObj","code","testDef","codeWords","testWKT","some","word","indexOf","codes","checkMercator","item","auth","checkProjStr","ext","testProj","parse","out","maybeProjStr"],"sources":["/home/chemy/final/node_modules/proj4/lib/parseCode.js"],"sourcesContent":["import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\nvar codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,QAAQ;AACzB,OAAOC,GAAG,MAAM,YAAY;AAC5B,OAAOC,OAAO,MAAM,cAAc;AAClC,OAAOC,KAAK,MAAM,SAAS;AAC3B,SAASC,OAAOA,CAACC,IAAI,EAAC;EACpB,OAAO,OAAOA,IAAI,KAAK,QAAQ;AACjC;AACA,SAASC,OAAOA,CAACD,IAAI,EAAC;EACpB,OAAOA,IAAI,IAAIL,IAAI;AACrB;AACA,IAAIO,SAAS,GAAG,CAAC,cAAc,EAAE,SAAS,EAAE,QAAQ,EAAC,QAAQ,EAAC,QAAQ,EAAC,UAAU,EAAE,SAAS,EAAE,aAAa,EAAE,eAAe,EAAE,QAAQ,EAAE,gBAAgB,CAAC;AACzJ,SAASC,OAAOA,CAACH,IAAI,EAAC;EACpB,OAAOE,SAAS,CAACE,IAAI,CAAC,UAAUC,IAAI,EAAE;IACpC,OAAOL,IAAI,CAACM,OAAO,CAACD,IAAI,CAAC,GAAG,CAAC,CAAC;EAChC,CAAC,CAAC;AACJ;AACA,IAAIE,KAAK,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,CAAC;AAChD,SAASC,aAAaA,CAACC,IAAI,EAAE;EAC3B,IAAIC,IAAI,GAAGZ,KAAK,CAACW,IAAI,EAAE,WAAW,CAAC;EACnC,IAAI,CAACC,IAAI,EAAE;IACT;EACF;EACA,IAAIV,IAAI,GAAGF,KAAK,CAACY,IAAI,EAAE,MAAM,CAAC;EAC9B,OAAOV,IAAI,IAAIO,KAAK,CAACD,OAAO,CAACN,IAAI,CAAC,GAAG,CAAC,CAAC;AACzC;AACA,SAASW,YAAYA,CAACF,IAAI,EAAE;EAC1B,IAAIG,GAAG,GAAGd,KAAK,CAACW,IAAI,EAAE,WAAW,CAAC;EAClC,IAAI,CAACG,GAAG,EAAE;IACR;EACF;EACA,OAAOd,KAAK,CAACc,GAAG,EAAE,OAAO,CAAC;AAC5B;AACA,SAASC,QAAQA,CAACb,IAAI,EAAC;EACrB,OAAOA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG;AACxB;AACA,SAASc,KAAKA,CAACd,IAAI,EAAC;EAClB,IAAID,OAAO,CAACC,IAAI,CAAC,EAAE;IACjB;IACA,IAAIC,OAAO,CAACD,IAAI,CAAC,EAAE;MACjB,OAAOL,IAAI,CAACK,IAAI,CAAC;IACnB;IACA,IAAIG,OAAO,CAACH,IAAI,CAAC,EAAE;MACjB,IAAIe,GAAG,GAAGnB,GAAG,CAACI,IAAI,CAAC;MACnB;MACA,IAAIQ,aAAa,CAACO,GAAG,CAAC,EAAE;QACtB,OAAOpB,IAAI,CAAC,WAAW,CAAC;MAC1B;MACA,IAAIqB,YAAY,GAAGL,YAAY,CAACI,GAAG,CAAC;MACpC,IAAIC,YAAY,EAAE;QAChB,OAAOnB,OAAO,CAACmB,YAAY,CAAC;MAC9B;MACA,OAAOD,GAAG;IACZ;IACA,IAAIF,QAAQ,CAACb,IAAI,CAAC,EAAE;MAClB,OAAOH,OAAO,CAACG,IAAI,CAAC;IACtB;EACF,CAAC,MAAI;IACH,OAAOA,IAAI;EACb;AACF;AAEA,eAAec,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}